const _0x3eccc9=_0x29a3;(function(_0x3bbad,_0x230a6f){const _0x188963=_0x29a3,_0x370879=_0x3bbad();while(!![]){try{const _0x18df6a=parseInt(_0x188963(0xfb))/0x1+-parseInt(_0x188963(0x104))/0x2*(-parseInt(_0x188963(0xfd))/0x3)+parseInt(_0x188963(0x181))/0x4*(parseInt(_0x188963(0x191))/0x5)+-parseInt(_0x188963(0x10a))/0x6*(parseInt(_0x188963(0x199))/0x7)+parseInt(_0x188963(0xe4))/0x8+parseInt(_0x188963(0x158))/0x9+parseInt(_0x188963(0x11c))/0xa*(-parseInt(_0x188963(0x159))/0xb);if(_0x18df6a===_0x230a6f)break;else _0x370879['push'](_0x370879['shift']());}catch(_0xd7450){_0x370879['push'](_0x370879['shift']());}}}(_0xe0cf,0xc19f5));const messageInput=document[_0x3eccc9(0x17d)](_0x3eccc9(0x171)),sendButton=document[_0x3eccc9(0x17d)](_0x3eccc9(0x151)),chatMessagesContainer=document['getElementById'](_0x3eccc9(0x10e)),newChatButton=document[_0x3eccc9(0x17d)](_0x3eccc9(0x15c)),chatList=document['getElementById'](_0x3eccc9(0x149)),clearChatsButton=document[_0x3eccc9(0x17d)](_0x3eccc9(0x121)),totalRequestsSpan=document['getElementById'](_0x3eccc9(0x109)),todayRequestsSpan=document[_0x3eccc9(0x17d)](_0x3eccc9(0x197)),roleSelect=document[_0x3eccc9(0x17d)](_0x3eccc9(0x10f)),roleSelectDropdown=document['getElementById'](_0x3eccc9(0x166)),selectedRoleNameSpan=document[_0x3eccc9(0x17d)]('selected-role-name'),burgerButton=document[_0x3eccc9(0x17d)]('burger-button'),mobileBurgerButton=document['getElementById'](_0x3eccc9(0x14d)),sidebar=document[_0x3eccc9(0xf7)](_0x3eccc9(0x14a)),overlay=document[_0x3eccc9(0x14c)](_0x3eccc9(0x103));overlay[_0x3eccc9(0x15d)][_0x3eccc9(0x144)](_0x3eccc9(0x143)),document[_0x3eccc9(0xff)]['appendChild'](overlay);const modelSelect=document[_0x3eccc9(0x17d)](_0x3eccc9(0x176)),modelSelectDropdown=document[_0x3eccc9(0x17d)]('model-select-dropdown'),selectedModelNameSpan=document[_0x3eccc9(0x17d)](_0x3eccc9(0xf1)),GOOGLE_API_KEY=_0x3eccc9(0x102),OPENROUTER_API_KEY=_0x3eccc9(0xdf),MODELS=[{'id':'gemini-flash','name':_0x3eccc9(0x129),'apiKey':GOOGLE_API_KEY,'apiType':_0x3eccc9(0x106),'supportsStreaming':![],'endpoint':'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key='+GOOGLE_API_KEY,'requestFormatter':(_0x5e5bd0,_0x1350ba)=>{const _0x4b3de4=_0x3eccc9,_0x5ec63e=_0x5e5bd0[_0x4b3de4(0xe6)](_0x42c3c2=>({'role':_0x42c3c2['sender']==='user'?_0x4b3de4(0x19c):_0x4b3de4(0x188),'parts':[{'text':_0x42c3c2['text']}]})),_0x40cdea={'contents':_0x5ec63e};return _0x1350ba&&(_0x40cdea[_0x4b3de4(0x185)]={'parts':[{'text':_0x1350ba}]}),_0x40cdea;}},{'id':_0x3eccc9(0xe5),'name':'deepseek','apiKey':OPENROUTER_API_KEY,'apiType':_0x3eccc9(0x156),'supportsStreaming':!![],'endpoint':_0x3eccc9(0x114),'requestFormatter':(_0x204ee0,_0xd57a15)=>{const _0x1a86b3=_0x3eccc9,_0x239719=[];return _0xd57a15&&_0x239719[_0x1a86b3(0x108)]({'role':_0x1a86b3(0xe1),'content':_0xd57a15}),_0x204ee0[_0x1a86b3(0x193)](_0x4e19ba=>{const _0x26a903=_0x1a86b3;_0x239719[_0x26a903(0x108)]({'role':_0x4e19ba[_0x26a903(0x137)]===_0x26a903(0x19c)?_0x26a903(0x19c):_0x26a903(0x154),'content':_0x4e19ba[_0x26a903(0xda)]});}),{'model':_0x1a86b3(0x116),'messages':_0x239719,'stream':!![]};}}],ROLES=[{'id':_0x3eccc9(0x16d),'name':'Стандарт','prompt':''},{'id':_0x3eccc9(0x113),'name':_0x3eccc9(0x13f),'prompt':_0x3eccc9(0x19e)},{'id':_0x3eccc9(0x18e),'name':_0x3eccc9(0x19d),'prompt':'Ты\x20-\x20талантливый\x20писатель\x20с\x20богатым\x20воображением\x20и\x20отточенным\x20стилем.\x20Твоя\x20задача\x20-\x20помогать\x20пользователю\x20с\x20созданием\x20захватывающих\x20текстов,\x20разработкой\x20оригинальных\x20сюжетов,\x20написанием\x20трогательных\x20стихов\x20и\x20запоминающихся\x20песен.\x20Используй\x20яркий\x20и\x20выразительный\x20язык,\x20умело\x20играй\x20со\x20словами\x20и\x20создавай\x20неповторимую\x20атмосферу.\x20Предлагай\x20несколько\x20вариантов,\x20раскрывающих\x20разные\x20грани\x20темы.\x20ПИШИ\x20ВСЕГДА\x20ПО\x20РУССКИ'},{'id':_0x3eccc9(0xdb),'name':_0x3eccc9(0x139),'prompt':'Ты\x20-\x20профессиональный\x20переводчик,\x20владеющий\x20множеством\x20языков\x20и\x20обладающий\x20глубоким\x20пониманием\x20культурных\x20нюансов.\x20Твоя\x20задача\x20-\x20обеспечивать\x20точный\x20и\x20стилистически\x20грамотный\x20перевод\x20предоставленного\x20текста\x20с\x20одного\x20языка\x20на\x20другой.\x20Учитывай\x20контекст\x20и\x20целевую\x20аудиторию,\x20чтобы\x20сохранить\x20смысл\x20и\x20эмоциональную\x20окраску\x20оригинала.\x20При\x20необходимости\x20предлагай\x20несколько\x20вариантов\x20перевода.\x20ПИШИ\x20ВСЕГДА\x20ПО\x20РУССКИ'}];let dialogues=[],currentDialogueId=null,totalRequests=0x0,todayRequests=0x0,lastRequestDate=null,currentRoleId=ROLES[0x0]['id'],currentModelId=MODELS[0x0]['id'];function generateUUID(){const _0x155765=_0x3eccc9;return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'[_0x155765(0x117)](/[xy]/g,function(_0x1f1299){const _0x279035=_0x155765;var _0x23cff3=Math[_0x279035(0xe3)]()*0x10|0x0,_0x4e34b5=_0x1f1299=='x'?_0x23cff3:_0x23cff3&0x3|0x8;return _0x4e34b5[_0x279035(0xf0)](0x10);});}function saveState(){const _0x39bf85=_0x3eccc9;localStorage[_0x39bf85(0xe7)](_0x39bf85(0x182),JSON[_0x39bf85(0x15b)]({'dialogues':dialogues,'currentDialogueId':currentDialogueId,'totalRequests':totalRequests,'todayRequests':todayRequests,'lastRequestDate':lastRequestDate,'currentRoleId':currentRoleId,'currentModelId':currentModelId}));}function loadState(){const _0x18ce42=_0x3eccc9,_0x30b0f2=localStorage[_0x18ce42(0x100)](_0x18ce42(0x182));if(_0x30b0f2){const _0x120272=JSON[_0x18ce42(0x15f)](_0x30b0f2);dialogues=_0x120272[_0x18ce42(0x184)]||[],totalRequests=_0x120272[_0x18ce42(0x13d)]||0x0,todayRequests=_0x120272['todayRequests']||0x0,lastRequestDate=_0x120272[_0x18ce42(0x17a)]||null,currentRoleId=_0x120272['currentRoleId']||ROLES[0x0]['id'];const _0x30c78c=_0x120272[_0x18ce42(0x10d)],_0x2ba502=MODELS[_0x18ce42(0x17e)](_0x2afb73=>_0x2afb73['id']===_0x30c78c);currentModelId=_0x2ba502?_0x2ba502['id']:MODELS[0x0]['id'];const _0x40bb8f=new Date()['toISOString']()[_0x18ce42(0x11e)]('T')[0x0];lastRequestDate!==_0x40bb8f&&(todayRequests=0x0,lastRequestDate=_0x40bb8f);const _0x382751=dialogues['find'](_0x4376e5=>_0x4376e5['id']===_0x120272[_0x18ce42(0x16a)]);dialogues[_0x18ce42(0x142)]===0x0||!_0x382751?createNewChat(!![]):currentDialogueId=_0x120272[_0x18ce42(0x16a)];}else createNewChat(!![]);if(!currentDialogueId||!dialogues[_0x18ce42(0x17e)](_0x5207a1=>_0x5207a1['id']===currentDialogueId)){if(dialogues[_0x18ce42(0x142)]>0x0)currentDialogueId=dialogues[0x0]['id'];else{createNewChat(!![]);return;}}saveState();}function escapeHTML(_0x1507ec){const _0x22df14=_0x3eccc9;return _0x1507ec['replace'](/&/g,_0x22df14(0x112))['replace'](/</g,_0x22df14(0x155))[_0x22df14(0x117)](/>/g,_0x22df14(0x124))['replace'](/"/g,_0x22df14(0x13b))['replace'](/'/g,_0x22df14(0xe0));}function formatMessageContent(_0x53934d){const _0x4e6449=_0x3eccc9,_0x278433=/```(\w*)\n([\s\S]*?)```/g,_0x1ed43d=/\*\*(.*?)\*\*/g;let _0x23460c='',_0x27d966=0x0;_0x53934d[_0x4e6449(0x117)](_0x278433,(_0x188e9d,_0x4145d7,_0x2f738f,_0x525af6)=>{const _0x2e37c3=_0x4e6449;let _0x1208ea=_0x53934d[_0x2e37c3(0x160)](_0x27d966,_0x525af6);_0x1208ea=escapeHTML(_0x1208ea),_0x1208ea=_0x1208ea[_0x2e37c3(0x117)](_0x1ed43d,_0x2e37c3(0x11a)),_0x1208ea=_0x1208ea[_0x2e37c3(0x117)](/\n/g,_0x2e37c3(0x11d)),_0x23460c+=_0x1208ea;const _0x519cd8=_0x4145d7||_0x2e37c3(0xf8),_0x37b357=_0x2f738f[_0x2e37c3(0xf2)]();return _0x23460c+=_0x2e37c3(0x128)+escapeHTML(_0x519cd8)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22copy-button\x22\x20title=\x22Скопировать\x20код\x22><i\x20class=\x22fas\x20fa-copy\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<pre><code>'+escapeHTML(_0x37b357)+'</code></pre>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x27d966=_0x525af6+_0x188e9d[_0x2e37c3(0x142)],_0x188e9d;});let _0x1af027=_0x53934d[_0x4e6449(0x160)](_0x27d966);return _0x1af027=escapeHTML(_0x1af027),_0x1af027=_0x1af027[_0x4e6449(0x117)](_0x1ed43d,'<span\x20class=\x22bold-text\x22>$1</span>'),_0x1af027=_0x1af027[_0x4e6449(0x117)](/\n/g,_0x4e6449(0x11d)),_0x23460c+=_0x1af027,_0x23460c;}function addMessageToChat(_0x598038,_0x5cd198,_0x25b6de=![]){const _0x12d636=_0x3eccc9,_0x12ae8d=document['createElement'](_0x12d636(0x103));_0x12ae8d[_0x12d636(0x15d)][_0x12d636(0x144)]('message'),_0x12ae8d[_0x12d636(0x15d)][_0x12d636(0x144)](_0x5cd198===_0x12d636(0x19c)?_0x12d636(0x175):'ai-message');_0x25b6de&&_0x12ae8d[_0x12d636(0x15d)][_0x12d636(0x144)]('thinking');const _0x43cec7=document[_0x12d636(0x14c)](_0x12d636(0x103));_0x43cec7[_0x12d636(0x15d)][_0x12d636(0x144)](_0x12d636(0x19f)),_0x43cec7[_0x12d636(0x120)]=_0x5cd198===_0x12d636(0x19c)?'Вы':'AI';const _0x163878=document[_0x12d636(0x14c)]('div');_0x163878[_0x12d636(0x15d)][_0x12d636(0x144)](_0x12d636(0x165));_0x25b6de?_0x163878[_0x12d636(0x163)]=_0x598038:_0x5cd198==='ai'?_0x163878[_0x12d636(0x163)]=formatMessageContent(_0x598038):(_0x163878[_0x12d636(0x120)]=_0x598038,_0x163878[_0x12d636(0x163)]=_0x163878[_0x12d636(0x163)][_0x12d636(0x117)](/\n/g,_0x12d636(0x11d)));_0x12ae8d[_0x12d636(0x12a)](_0x43cec7),_0x12ae8d[_0x12d636(0x12a)](_0x163878),chatMessagesContainer[_0x12d636(0x12a)](_0x12ae8d),chatMessagesContainer[_0x12d636(0x135)]=chatMessagesContainer[_0x12d636(0xeb)];if(_0x25b6de)return _0x12ae8d;}function updateMessageInChatElement(_0x2ff714,_0x3aefbe){const _0x949ef7=_0x3eccc9;if(_0x2ff714&&_0x2ff714[_0x949ef7(0x15d)]['contains'](_0x949ef7(0x180))){_0x2ff714['classList'][_0x949ef7(0xe8)](_0x949ef7(0x180));const _0x1d7275=_0x2ff714[_0x949ef7(0xf7)](_0x949ef7(0x1a0));_0x1d7275&&(_0x1d7275[_0x949ef7(0x163)]=formatMessageContent(_0x3aefbe)),chatMessagesContainer[_0x949ef7(0x135)]=chatMessagesContainer[_0x949ef7(0xeb)];}}function removeMessageFromChatElement(_0x590b27){const _0x3957a3=_0x3eccc9;_0x590b27&&_0x590b27['parentNode']&&_0x590b27[_0x3957a3(0xea)]['removeChild'](_0x590b27);}function renderMessages(_0x35bd9b){const _0x38660b=_0x3eccc9;chatMessagesContainer[_0x38660b(0x163)]='';const _0x4c7b58=dialogues['find'](_0x592dd1=>_0x592dd1['id']===_0x35bd9b);if(!_0x4c7b58){addMessageToChat(_0x38660b(0x179),'ai');return;}_0x4c7b58[_0x38660b(0xf6)][_0x38660b(0x142)]===0x0?addMessageToChat(_0x38660b(0x134),'ai'):_0x4c7b58['messages'][_0x38660b(0x193)](_0x3b9791=>{addMessageToChat(_0x3b9791['text'],_0x3b9791['sender']);});}function renderChatList(){const _0x2f7e82=_0x3eccc9;chatList[_0x2f7e82(0x163)]='';if(dialogues['length']===0x0){const _0x3a9152=document['createElement']('li');_0x3a9152[_0x2f7e82(0x15d)][_0x2f7e82(0x144)](_0x2f7e82(0x123),_0x2f7e82(0x19b)),_0x3a9152[_0x2f7e82(0x120)]=_0x2f7e82(0x10c),chatList[_0x2f7e82(0x12a)](_0x3a9152);return;}dialogues[_0x2f7e82(0x193)](_0x256230=>{const _0x4bba08=_0x2f7e82,_0x7a8195=document[_0x4bba08(0x14c)]('li');_0x7a8195['classList'][_0x4bba08(0x144)](_0x4bba08(0x123));_0x256230['id']===currentDialogueId&&_0x7a8195[_0x4bba08(0x15d)][_0x4bba08(0x144)]('active');_0x7a8195[_0x4bba08(0x12c)][_0x4bba08(0x186)]=_0x256230['id'];const _0x3daadc=document['createElement']('span');_0x3daadc[_0x4bba08(0x15d)][_0x4bba08(0x144)](_0x4bba08(0x164));const _0x50fcc6=_0x256230['messages']['find'](_0x105c15=>_0x105c15[_0x4bba08(0x137)]===_0x4bba08(0x19c));_0x3daadc[_0x4bba08(0x120)]=_0x256230['title']||(_0x50fcc6?_0x50fcc6[_0x4bba08(0xda)][_0x4bba08(0x160)](0x0,0x1e)+(_0x50fcc6['text'][_0x4bba08(0x142)]>0x1e?'...':''):_0x4bba08(0x111));const _0x1739bc=document[_0x4bba08(0x14c)](_0x4bba08(0x103));_0x1739bc[_0x4bba08(0x15d)]['add'](_0x4bba08(0x190));const _0x4a7c94=document[_0x4bba08(0x14c)]('i');_0x4a7c94['classList'][_0x4bba08(0x144)](_0x4bba08(0x131),_0x4bba08(0x153)),_0x4a7c94[_0x4bba08(0x173)]='Удалить\x20диалог',_0x4a7c94[_0x4bba08(0x12c)][_0x4bba08(0x195)]=_0x4bba08(0x14f),_0x1739bc[_0x4bba08(0x12a)](_0x4a7c94),_0x7a8195[_0x4bba08(0x12a)](_0x3daadc),_0x7a8195[_0x4bba08(0x12a)](_0x1739bc),chatList[_0x4bba08(0x12a)](_0x7a8195);});}function renderRolesDropdown(){const _0x4d76e9=_0x3eccc9;roleSelectDropdown[_0x4d76e9(0x163)]='',ROLES[_0x4d76e9(0x193)](_0x5b0dd5=>{const _0x459709=_0x4d76e9,_0x3dfead=document[_0x459709(0x14c)](_0x459709(0x103));_0x3dfead[_0x459709(0x15d)][_0x459709(0x144)](_0x459709(0x13e)),_0x5b0dd5['id']===currentRoleId&&_0x3dfead['classList'][_0x459709(0x144)](_0x459709(0x12d)),_0x3dfead[_0x459709(0x12c)][_0x459709(0x130)]=_0x5b0dd5['id'],_0x3dfead['textContent']=_0x5b0dd5['name'],roleSelectDropdown['appendChild'](_0x3dfead);}),updateSelectedRoleName();}function updateSelectedRoleName(){const _0x193f46=_0x3eccc9,_0x2a70fc=ROLES[_0x193f46(0x17e)](_0x1eb906=>_0x1eb906['id']===currentRoleId);selectedRoleNameSpan['textContent']=_0x2a70fc?_0x2a70fc[_0x193f46(0x13a)]:'Неизвестная\x20роль';}function switchRole(_0x5eb0f6){if(currentRoleId===_0x5eb0f6)return;currentRoleId=_0x5eb0f6,saveState(),renderRolesDropdown();}function renderModelsDropdown(){const _0x316695=_0x3eccc9;modelSelectDropdown[_0x316695(0x163)]='',MODELS[_0x316695(0x193)](_0x13b8a8=>{const _0xe56f64=_0x316695,_0x335697=document[_0xe56f64(0x14c)]('div');_0x335697[_0xe56f64(0x15d)]['add'](_0xe56f64(0x13e)),_0x13b8a8['id']===currentModelId&&_0x335697['classList'][_0xe56f64(0x144)](_0xe56f64(0x12d)),_0x335697[_0xe56f64(0x12c)]['modelId']=_0x13b8a8['id'],_0x335697[_0xe56f64(0x120)]=_0x13b8a8[_0xe56f64(0x13a)],modelSelectDropdown[_0xe56f64(0x12a)](_0x335697);}),updateSelectedModelName();}function updateSelectedModelName(){const _0x3badd3=_0x3eccc9,_0x479790=MODELS[_0x3badd3(0x17e)](_0x4d790a=>_0x4d790a['id']===currentModelId);selectedModelNameSpan[_0x3badd3(0x120)]=_0x479790?_0x479790['name']:_0x3badd3(0x16e);}function switchModel(_0x3f64d3){if(currentModelId===_0x3f64d3)return;currentModelId=_0x3f64d3,saveState(),renderModelsDropdown();}function updateCountersUI(){const _0x39c4c5=_0x3eccc9;totalRequestsSpan[_0x39c4c5(0x120)]=totalRequests,todayRequestsSpan[_0x39c4c5(0x120)]=todayRequests;}function createNewChat(_0x29ce0e=!![]){const _0x91792a=_0x3eccc9,_0x51ca0c=generateUUID(),_0x1052f1={'id':_0x51ca0c,'title':'','messages':[]};dialogues[_0x91792a(0x12f)](_0x1052f1),_0x29ce0e&&(currentDialogueId=_0x51ca0c,saveState(),renderChatList(),renderMessages(currentDialogueId));}function switchChat(_0x2c8923){const _0x8378f4=_0x3eccc9;if(currentDialogueId===_0x2c8923)return;currentDialogueId=_0x2c8923,saveState(),renderChatList(),renderMessages(currentDialogueId),sidebar[_0x8378f4(0x15d)]['remove'](_0x8378f4(0x194)),overlay['classList'][_0x8378f4(0xe8)](_0x8378f4(0x194));}function deleteChat(_0x13e5af){const _0x3f9b22=_0x3eccc9,_0x2c3814=dialogues['findIndex'](_0x466cba=>_0x466cba['id']===_0x13e5af);if(_0x2c3814===-0x1)return;dialogues['splice'](_0x2c3814,0x1);if(dialogues[_0x3f9b22(0x142)]===0x0)createNewChat(!![]);else currentDialogueId===_0x13e5af?(currentDialogueId=dialogues[0x0]['id'],saveState(),renderChatList(),renderMessages(currentDialogueId)):(saveState(),renderChatList());}function clearAllChats(){const _0x4497d3=_0x3eccc9;confirm(_0x4497d3(0xe2))&&(dialogues=[],createNewChat(!![]),updateCountersUI(),saveState());}function _0x29a3(_0x221ec2,_0x5a150d){const _0xe0cfd4=_0xe0cf();return _0x29a3=function(_0x29a35f,_0x4ecb9c){_0x29a35f=_0x29a35f-0xda;let _0x1566ab=_0xe0cfd4[_0x29a35f];return _0x1566ab;},_0x29a3(_0x221ec2,_0x5a150d);}async function sendMessage(){const _0xaec9a=_0x3eccc9,_0x25914c=messageInput[_0xaec9a(0xf3)][_0xaec9a(0xf2)]();if(!_0x25914c)return;const _0x331c13=dialogues[_0xaec9a(0x17e)](_0x409ecd=>_0x409ecd['id']===currentDialogueId);if(!_0x331c13){addMessageToChat(_0xaec9a(0x152),'ai'),saveState();return;}addMessageToChat(_0x25914c,_0xaec9a(0x19c)),_0x331c13['messages']['push']({'text':_0x25914c,'sender':_0xaec9a(0x19c)}),messageInput[_0xaec9a(0xf3)]='',messageInput['disabled']=!![],sendButton[_0xaec9a(0x101)]=!![];const _0xcfbad6=addMessageToChat(_0xaec9a(0x196),'ai',!![]);try{const _0x434a86=MODELS['find'](_0x255dac=>_0x255dac['id']===currentModelId);if(!_0x434a86)throw new Error(_0xaec9a(0xdc));const _0xf4f8f7=ROLES[_0xaec9a(0x17e)](_0x2f0ae4=>_0x2f0ae4['id']===currentRoleId),_0x907241=_0xf4f8f7?_0xf4f8f7['prompt']:'',_0x1fb170=_0x434a86[_0xaec9a(0x132)](_0x331c13[_0xaec9a(0xf6)],_0x907241),_0x3b5220={'Content-Type':_0xaec9a(0x14e)};if(_0x434a86[_0xaec9a(0x172)]){if(_0x434a86[_0xaec9a(0x110)]===_0xaec9a(0x106)){}else _0x434a86[_0xaec9a(0x110)]===_0xaec9a(0x156)&&(_0x3b5220[_0xaec9a(0x12e)]=_0xaec9a(0x198)+_0x434a86[_0xaec9a(0x172)]);}const _0x33ad2f=await fetch(_0x434a86[_0xaec9a(0x119)],{'method':_0xaec9a(0xf5),'headers':_0x3b5220,'body':JSON[_0xaec9a(0x15b)](_0x1fb170)});if(!_0x33ad2f['ok']){removeMessageFromChatElement(_0xcfbad6);const _0x112edd=await _0x33ad2f[_0xaec9a(0x189)]();console[_0xaec9a(0xfa)](_0xaec9a(0x187),_0x33ad2f[_0xaec9a(0xdd)],_0x33ad2f[_0xaec9a(0x16f)],_0x112edd);let _0x4c45db=_0xaec9a(0xde)+_0x33ad2f[_0xaec9a(0xdd)]+'\x20'+_0x33ad2f[_0xaec9a(0x16f)]+'.';if(_0x112edd&&_0x112edd[_0xaec9a(0xfa)]&&_0x112edd[_0xaec9a(0xfa)][_0xaec9a(0x145)])_0x4c45db+=_0xaec9a(0x146)+_0x112edd['error'][_0xaec9a(0x145)];else _0x112edd&&_0x112edd[_0xaec9a(0x145)]&&(_0x4c45db+='\x20Детали:\x20'+_0x112edd[_0xaec9a(0x145)]);addMessageToChat(_0x4c45db,'ai');}else{if(_0x434a86[_0xaec9a(0x140)]&&_0x33ad2f[_0xaec9a(0xff)]){let _0x4f05ea='';const _0xf8a37b=_0x33ad2f['body'][_0xaec9a(0x10b)](),_0x438ae2=new TextDecoder(_0xaec9a(0x138));while(!![]){const {done:_0x442172,value:_0xb3b53f}=await _0xf8a37b[_0xaec9a(0x15e)]();if(_0x442172)break;const _0x280d35=_0x438ae2['decode'](_0xb3b53f,{'stream':!![]}),_0x19b7b7=_0x280d35[_0xaec9a(0x11e)]('\x0a')['filter'](_0x4b536d=>_0x4b536d['trim']()!=='');for(const _0x1db1a1 of _0x19b7b7){if(_0x1db1a1[_0xaec9a(0x170)](_0xaec9a(0x118))){const _0x142b88=_0x1db1a1['substring'](0x6);if(_0x142b88==='[DONE]')break;try{const _0x379bda=JSON[_0xaec9a(0x15f)](_0x142b88);if(_0x379bda[_0xaec9a(0x178)]&&_0x379bda[_0xaec9a(0x178)][_0xaec9a(0x142)]>0x0){const _0x13b90b=_0x379bda[_0xaec9a(0x178)][0x0][_0xaec9a(0xee)][_0xaec9a(0xf4)]||'';_0x13b90b&&(_0x4f05ea+=_0x13b90b,updateMessageInChatElement(_0xcfbad6,_0x4f05ea));}}catch(_0x802ca4){console['error'](_0xaec9a(0x19a),_0x802ca4,_0x142b88);}}}}removeMessageFromChatElement(_0xcfbad6),addMessageToChat(_0x4f05ea,'ai'),_0x331c13[_0xaec9a(0xf6)]['push']({'text':_0x4f05ea,'sender':'ai'});}else{const _0x4e79c8=await _0x33ad2f[_0xaec9a(0x189)]();removeMessageFromChatElement(_0xcfbad6),console['log'](_0xaec9a(0x16c),_0x4e79c8);let _0x951f2c=_0xaec9a(0xef);if(_0x434a86['apiType']===_0xaec9a(0x106)){if(_0x4e79c8[_0xaec9a(0x136)]&&_0x4e79c8[_0xaec9a(0x136)][_0xaec9a(0x142)]>0x0&&_0x4e79c8[_0xaec9a(0x136)][0x0][_0xaec9a(0xf4)]&&_0x4e79c8[_0xaec9a(0x136)][0x0][_0xaec9a(0xf4)]['parts']&&_0x4e79c8[_0xaec9a(0x136)][0x0][_0xaec9a(0xf4)][_0xaec9a(0x192)][_0xaec9a(0x142)]>0x0&&_0x4e79c8[_0xaec9a(0x136)][0x0][_0xaec9a(0xf4)][_0xaec9a(0x192)][0x0]['text'])_0x951f2c=_0x4e79c8['candidates'][0x0][_0xaec9a(0xf4)][_0xaec9a(0x192)][0x0][_0xaec9a(0xda)],addMessageToChat(_0x951f2c,'ai'),_0x331c13['messages'][_0xaec9a(0x108)]({'text':_0x951f2c,'sender':'ai'});else{if(_0x4e79c8[_0xaec9a(0xfc)]&&_0x4e79c8[_0xaec9a(0xfc)][_0xaec9a(0x127)]){let _0xc837f2=_0x4e79c8[_0xaec9a(0xfc)]['blockReason'],_0x38f21a=_0x4e79c8[_0xaec9a(0xfc)][_0xaec9a(0x17c)],_0x277ce4=_0xaec9a(0x183)+_0xc837f2+'.';_0x38f21a&&_0x38f21a['length']>0x0&&(_0x277ce4+=_0xaec9a(0x107)+_0x38f21a['map'](_0x6dce3f=>_0x6dce3f[_0xaec9a(0xec)]+'\x20('+_0x6dce3f['probability']+')')['join'](',\x20')),addMessageToChat(_0x277ce4,'ai');}else console[_0xaec9a(0xfa)](_0xaec9a(0x105),_0x4e79c8),addMessageToChat(_0xaec9a(0x17b),'ai');}}else _0x434a86[_0xaec9a(0x110)]===_0xaec9a(0x156)?_0x4e79c8[_0xaec9a(0x178)]&&_0x4e79c8[_0xaec9a(0x178)][_0xaec9a(0x142)]>0x0&&_0x4e79c8[_0xaec9a(0x178)][0x0]['message']&&_0x4e79c8[_0xaec9a(0x178)][0x0][_0xaec9a(0x145)][_0xaec9a(0xf4)]?(_0x951f2c=_0x4e79c8[_0xaec9a(0x178)][0x0][_0xaec9a(0x145)][_0xaec9a(0xf4)],addMessageToChat(_0x951f2c,'ai'),_0x331c13[_0xaec9a(0xf6)][_0xaec9a(0x108)]({'text':_0x951f2c,'sender':'ai'})):(console[_0xaec9a(0xfa)](_0xaec9a(0x12b),_0x4e79c8),addMessageToChat(_0xaec9a(0xfe),'ai')):(console[_0xaec9a(0xfa)]('Неизвестный\x20тип\x20API:',_0x434a86[_0xaec9a(0x110)]),addMessageToChat(_0xaec9a(0x162),'ai'));}!_0x331c13[_0xaec9a(0x173)]&&_0x331c13[_0xaec9a(0xf6)]['length']>0x0&&_0x331c13[_0xaec9a(0xf6)][0x0][_0xaec9a(0x137)]===_0xaec9a(0x19c)&&(_0x331c13['title']=_0x331c13[_0xaec9a(0xf6)][0x0][_0xaec9a(0xda)][_0xaec9a(0x160)](0x0,0x1e)+(_0x331c13[_0xaec9a(0xf6)][0x0]['text'][_0xaec9a(0x142)]>0x1e?'...':''),renderChatList());totalRequests++;const _0x1fe751=new Date()[_0xaec9a(0x18f)]()[_0xaec9a(0x11e)]('T')[0x0];lastRequestDate!==_0x1fe751?(todayRequests=0x1,lastRequestDate=_0x1fe751):todayRequests++,updateCountersUI();}saveState();}catch(_0x482cee){console[_0xaec9a(0xfa)](_0xaec9a(0x18d),_0x482cee),removeMessageFromChatElement(_0xcfbad6);const _0x3a0768=_0xaec9a(0x15a)+(_0x482cee[_0xaec9a(0x145)]||_0xaec9a(0x13c))+_0xaec9a(0x17f);addMessageToChat(_0x3a0768,'ai'),saveState();}finally{messageInput[_0xaec9a(0x101)]=![],sendButton[_0xaec9a(0x101)]=![],messageInput['focus'](),renderChatList();}}sendButton[_0x3eccc9(0x125)](_0x3eccc9(0x148),sendMessage),messageInput[_0x3eccc9(0x125)]('keypress',function(_0x2aead6){const _0x411759=_0x3eccc9;_0x2aead6[_0x411759(0x174)]===_0x411759(0x16b)&&!_0x2aead6[_0x411759(0x169)]&&(_0x2aead6[_0x411759(0x133)](),sendMessage());}),newChatButton[_0x3eccc9(0x125)]('click',()=>{const _0x1a0309=_0x3eccc9;createNewChat(!![]),sidebar[_0x1a0309(0x15d)][_0x1a0309(0xe8)](_0x1a0309(0x194)),overlay[_0x1a0309(0x15d)][_0x1a0309(0xe8)]('open');}),clearChatsButton['addEventListener'](_0x3eccc9(0x148),()=>{const _0x6fcf65=_0x3eccc9;clearAllChats(),sidebar[_0x6fcf65(0x15d)][_0x6fcf65(0xe8)]('open'),overlay['classList'][_0x6fcf65(0xe8)]('open');}),chatList[_0x3eccc9(0x125)]('click',_0x2f30c5=>{const _0x168290=_0x3eccc9,_0x3dfdb2=_0x2f30c5['target']['closest']('.chat-item');if(!_0x3dfdb2||!_0x3dfdb2[_0x168290(0x12c)][_0x168290(0x186)])return;const _0x26f6c7=_0x3dfdb2[_0x168290(0x12c)][_0x168290(0x186)],_0x438500=_0x2f30c5[_0x168290(0x126)];_0x438500[_0x168290(0x15d)][_0x168290(0x11b)](_0x168290(0x153))?confirm(_0x168290(0x167))&&deleteChat(_0x26f6c7):switchChat(_0x26f6c7);}),roleSelect[_0x3eccc9(0x125)](_0x3eccc9(0x148),_0x46addd=>{const _0x1b9408=_0x3eccc9;_0x46addd[_0x1b9408(0x141)](),roleSelectDropdown[_0x1b9408(0x150)]['display']=roleSelectDropdown[_0x1b9408(0x150)]['display']===_0x1b9408(0x122)?_0x1b9408(0x157):'block',modelSelectDropdown[_0x1b9408(0x150)][_0x1b9408(0x147)]=_0x1b9408(0x157);}),roleSelectDropdown['addEventListener'](_0x3eccc9(0x148),_0x34f342=>{const _0x48c114=_0x3eccc9,_0x2f4ca3=_0x34f342[_0x48c114(0x126)][_0x48c114(0x115)](_0x48c114(0x18c));_0x2f4ca3&&_0x2f4ca3[_0x48c114(0x12c)][_0x48c114(0x130)]&&(switchRole(_0x2f4ca3[_0x48c114(0x12c)][_0x48c114(0x130)]),roleSelectDropdown['style'][_0x48c114(0x147)]='none');}),modelSelect[_0x3eccc9(0x125)](_0x3eccc9(0x148),_0x28572f=>{const _0x21a62c=_0x3eccc9;_0x28572f['stopPropagation'](),modelSelectDropdown[_0x21a62c(0x150)][_0x21a62c(0x147)]=modelSelectDropdown[_0x21a62c(0x150)]['display']===_0x21a62c(0x122)?_0x21a62c(0x157):_0x21a62c(0x122),roleSelectDropdown[_0x21a62c(0x150)][_0x21a62c(0x147)]='none';}),modelSelectDropdown[_0x3eccc9(0x125)](_0x3eccc9(0x148),_0x40a43b=>{const _0x1ab149=_0x3eccc9,_0x2422ee=_0x40a43b['target'][_0x1ab149(0x115)](_0x1ab149(0x18c));_0x2422ee&&_0x2422ee[_0x1ab149(0x12c)][_0x1ab149(0x18b)]&&(switchModel(_0x2422ee[_0x1ab149(0x12c)]['modelId']),modelSelectDropdown[_0x1ab149(0x150)]['display']=_0x1ab149(0x157));}),document[_0x3eccc9(0x125)](_0x3eccc9(0x148),_0x2b7ea4=>{const _0x4db1d8=_0x3eccc9;!roleSelect[_0x4db1d8(0x11b)](_0x2b7ea4[_0x4db1d8(0x126)])&&(roleSelectDropdown['style'][_0x4db1d8(0x147)]=_0x4db1d8(0x157)),!modelSelect[_0x4db1d8(0x11b)](_0x2b7ea4['target'])&&(modelSelectDropdown[_0x4db1d8(0x150)][_0x4db1d8(0x147)]=_0x4db1d8(0x157));}),chatMessagesContainer[_0x3eccc9(0x125)](_0x3eccc9(0x148),_0x49c3c2=>{const _0x38b6a6=_0x3eccc9;if(_0x49c3c2[_0x38b6a6(0x126)][_0x38b6a6(0x15d)][_0x38b6a6(0x11b)](_0x38b6a6(0x161))||_0x49c3c2['target']['closest']('.copy-button')){const _0x41c5ed=_0x49c3c2[_0x38b6a6(0x126)][_0x38b6a6(0x115)](_0x38b6a6(0xe9)),_0x949188=_0x41c5ed[_0x38b6a6(0x115)](_0x38b6a6(0x18a));if(_0x949188){const _0x122b08=_0x949188[_0x38b6a6(0xf7)]('code');_0x122b08&&navigator[_0x38b6a6(0x168)][_0x38b6a6(0x177)](_0x122b08['textContent'])[_0x38b6a6(0x14b)](()=>{const _0x521e57=_0x38b6a6,_0x2da8d6=_0x41c5ed['innerHTML'];_0x41c5ed[_0x521e57(0x163)]='<i\x20class=\x22fas\x20fa-check\x22></i>',_0x41c5ed[_0x521e57(0x15d)][_0x521e57(0x144)]('copied'),setTimeout(()=>{const _0x569b1d=_0x521e57;_0x41c5ed[_0x569b1d(0x163)]=_0x2da8d6,_0x41c5ed[_0x569b1d(0x15d)][_0x569b1d(0xe8)](_0x569b1d(0x11f));},0x7d0);})[_0x38b6a6(0xed)](_0x56bc68=>{const _0x32121a=_0x38b6a6;console[_0x32121a(0xfa)]('Ошибка\x20при\x20копировании\x20текста:',_0x56bc68);});}}}),document[_0x3eccc9(0x125)]('DOMContentLoaded',()=>{const _0x23064f=_0x3eccc9;loadState(),renderChatList(),currentDialogueId?renderMessages(currentDialogueId):dialogues[_0x23064f(0x142)]>0x0?switchChat(dialogues[0x0]['id']):createNewChat(!![]),renderRolesDropdown(),renderModelsDropdown(),updateCountersUI(),burgerButton[_0x23064f(0x125)](_0x23064f(0x148),()=>{const _0x3231ea=_0x23064f;sidebar[_0x3231ea(0x15d)][_0x3231ea(0xf9)](_0x3231ea(0x194)),overlay['classList'][_0x3231ea(0xf9)](_0x3231ea(0x194));}),mobileBurgerButton[_0x23064f(0x125)]('click',()=>{const _0x38de4f=_0x23064f;sidebar['classList'][_0x38de4f(0xf9)]('open'),overlay[_0x38de4f(0x15d)][_0x38de4f(0xf9)](_0x38de4f(0x194));}),overlay[_0x23064f(0x125)](_0x23064f(0x148),()=>{const _0x172f5c=_0x23064f;sidebar['classList']['remove'](_0x172f5c(0x194)),overlay['classList'][_0x172f5c(0xe8)](_0x172f5c(0x194));});});function _0xe0cf(){const _0x5c0a4a=['contains','10rUDCbb','<br>','split','copied','textContent','clear-chats-button','block','chat-item','&gt;','addEventListener','target','blockReason','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22code-block\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22code-block-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22code-language\x22>','gemini\x20(работает\x20с\x20впн)','appendChild','Неожиданная\x20структура\x20ответа\x20OpenRouter\x20API\x20(не-стрим):','dataset','active','Authorization','unshift','roleId','fas','requestFormatter','preventDefault','Задавай\x20свои\x20вопросы\x20а\x20я\x20помогу\x20вам\x20на\x20них\x20ответить.','scrollTop','candidates','sender','utf-8','Переводчик','name','&quot;','Неизвестная\x20ошибка','totalRequests','dropdown-item','Программист','supportsStreaming','stopPropagation','length','overlay','add','message','\x20Детали:\x20','display','click','chat-list','.sidebar','then','createElement','mobile-burger-button','application/json','delete','style','send-button','Ошибка:\x20Текущий\x20диалог\x20не\x20найден.','fa-trash-alt','assistant','&lt;','openrouter','none','7210332IYHzsB','9247931lbbBrW','Произошла\x20ошибка:\x20','stringify','new-chat-button','classList','read','parse','substring','copy-button','Неизвестный\x20тип\x20API\x20модели.','innerHTML','chat-title','message-content','role-select-dropdown','Вы\x20действительно\x20хотите\x20удалить\x20этот\x20диалог?','clipboard','shiftKey','currentDialogueId','Enter','API\x20Response\x20data:','standard','Неизвестная\x20модель','statusText','startsWith','message-input','apiKey','title','key','user-message','model-select','writeText','choices','Ошибка:\x20Диалог\x20не\x20найден.','lastRequestDate','Получен\x20неожиданный\x20ответ\x20от\x20AI\x20(Google).\x20Проверьте\x20консоль\x20браузера.','safetyRatings','getElementById','find','.\x20Проверьте\x20консоль\x20браузера\x20(F12).','thinking','4aUzxCc','menapiState','Ваш\x20запрос\x20был\x20заблокирован\x20из-за:\x20','dialogues','systemInstruction','dialogueId','API\x20HTTP\x20Ошибка:','model','json','.code-block','modelId','.dropdown-item','Произошла\x20ошибка:','writer','toISOString','chat-item-actions','408635KNsDAY','parts','forEach','open','action','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Печатает...','today-requests','Bearer\x20','7XwfpCj','Ошибка\x20парсинга\x20JSON\x20чанка:','empty','user','Писатель','Ты\x20-\x20опытный\x20программист,\x20эксперт\x20в\x20различных\x20языках\x20и\x20технологиях.\x20Твоя\x20задача\x20-\x20предоставлять\x20подробные\x20и\x20точные\x20ответы\x20на\x20вопросы,\x20связанные\x20с\x20кодом,\x20алгоритмами\x20и\x20архитектурой.\x20Все\x20примеры\x20кода\x20должны\x20быть\x20представлены\x20в\x20форматированных\x20блоках,\x20снабженных\x20комментариями\x20для\x20облегчения\x20понимания.\x20Тщательно\x20объясняй\x20сложные\x20концепции\x20программирования,\x20используя\x20аналогии\x20и\x20примеры\x20из\x20реального\x20мира.\x20ПИШИ\x20ВСЕГДА\x20ПО\x20РУССКИ','message-avatar','.message-content','text','translator','Выбранная\x20модель\x20не\x20найдена.','status','HTTP\x20Ошибка\x20API:\x20','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','&#039;','system','Вы\x20действительно\x20хотите\x20очистить\x20ВСЕ\x20диалоги?\x20Это\x20действие\x20нельзя\x20отменить.','random','1250984zjBopD','deepseek-r1','map','setItem','remove','.copy-button','parentNode','scrollHeight','category','catch','delta','Не\x20удалось\x20получить\x20ответ\x20от\x20AI.','toString','selected-model-name','trim','value','content','POST','messages','querySelector','code','toggle','error','735798rXQbGT','promptFeedback','9OnJfVR','Получен\x20неожиданный\x20ответ\x20от\x20AI\x20(OpenRouter,\x20не-стрим).\x20Проверьте\x20консоль\x20браузера.','body','getItem','disabled','AIzaSyDhMSW32l2RocTIuWh6bO4vecvufYVMYTU','div','476922EchnTv','Неожиданная\x20структура\x20ответа\x20Google\x20API:','google','\x20Причины:\x20','push','total-requests','5139786KRRscA','getReader','Нет\x20диалогов','currentModelId','chat-messages','role-select','apiType','Новый\x20диалог','&amp;','coder','https://openrouter.ai/api/v1/chat/completions','closest','microsoft/mai-ds-r1:free','replace','data:\x20','endpoint','<span\x20class=\x22bold-text\x22>$1</span>'];_0xe0cf=function(){return _0x5c0a4a;};return _0xe0cf();}
