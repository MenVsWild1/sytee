const _0x5b0546=_0x16e5;(function(_0x1abb8a,_0xf3618f){const _0x15e08d=_0x16e5,_0xba8916=_0x1abb8a();while(!![]){try{const _0x59e0d5=-parseInt(_0x15e08d(0x112))/0x1*(parseInt(_0x15e08d(0xd9))/0x2)+parseInt(_0x15e08d(0x11c))/0x3+-parseInt(_0x15e08d(0x80))/0x4+-parseInt(_0x15e08d(0xbf))/0x5+-parseInt(_0x15e08d(0x116))/0x6+-parseInt(_0x15e08d(0xe9))/0x7*(parseInt(_0x15e08d(0xd7))/0x8)+parseInt(_0x15e08d(0x13f))/0x9;if(_0x59e0d5===_0xf3618f)break;else _0xba8916['push'](_0xba8916['shift']());}catch(_0x171965){_0xba8916['push'](_0xba8916['shift']());}}}(_0x43c3,0xc8eda));const messageInput=document[_0x5b0546(0x94)](_0x5b0546(0x11b)),sendButton=document[_0x5b0546(0x94)]('send-button'),chatMessagesContainer=document[_0x5b0546(0x94)](_0x5b0546(0xad)),newChatButton=document[_0x5b0546(0x94)](_0x5b0546(0xcd)),chatList=document['getElementById'](_0x5b0546(0xcb)),clearChatsButton=document[_0x5b0546(0x94)]('clear-chats-button'),totalRequestsSpan=document[_0x5b0546(0x94)](_0x5b0546(0xe2)),todayRequestsSpan=document[_0x5b0546(0x94)](_0x5b0546(0x95)),roleSelect=document['getElementById'](_0x5b0546(0xf3)),roleSelectDropdown=document[_0x5b0546(0x94)](_0x5b0546(0x9e)),selectedRoleNameSpan=document[_0x5b0546(0x94)]('selected-role-name'),burgerButton=document['getElementById']('burger-button'),mobileBurgerButton=document['getElementById'](_0x5b0546(0x9a)),sidebar=document['querySelector'](_0x5b0546(0x10e)),overlay=document['createElement'](_0x5b0546(0xec));overlay[_0x5b0546(0xab)]['add'](_0x5b0546(0x98)),document[_0x5b0546(0xb5)]['appendChild'](overlay);const modelSelect=document[_0x5b0546(0x94)]('model-select'),modelSelectDropdown=document[_0x5b0546(0x94)](_0x5b0546(0xc1)),selectedModelNameSpan=document['getElementById']('selected-model-name'),OPENROUTER_API_KEY0=_0x5b0546(0x10b),OPENROUTER_API_KEY=_0x5b0546(0x111),OPENROUTER_API_KEY1=_0x5b0546(0xac),OPENROUTER_API_KEY2=_0x5b0546(0x13c),MODELS=[{'id':_0x5b0546(0x13b),'name':'gemma-3','apiKey':OPENROUTER_API_KEY0,'apiType':_0x5b0546(0x12f),'supportsStreaming':!![],'endpoint':'https://openrouter.ai/api/v1/chat/completions','requestFormatter':(_0xfe1456,_0x50b3a7)=>{const _0x2aa30a=_0x5b0546,_0x3f0470=[];return _0x50b3a7&&_0x3f0470['push']({'role':'system','content':_0x50b3a7}),_0xfe1456['forEach'](_0x150277=>{const _0x1a3135=_0x16e5;_0x3f0470[_0x1a3135(0xd0)]({'role':_0x150277[_0x1a3135(0xda)]===_0x1a3135(0x147)?_0x1a3135(0x147):_0x1a3135(0xbe),'content':_0x150277[_0x1a3135(0xc4)]});}),{'model':_0x2aa30a(0xa6),'messages':_0x3f0470,'stream':!![]};}},{'id':_0x5b0546(0x12d),'name':'Qwen2.5','apiKey':OPENROUTER_API_KEY1,'apiType':_0x5b0546(0x12f),'supportsStreaming':!![],'endpoint':_0x5b0546(0x127),'requestFormatter':(_0x13d237,_0x47bee8)=>{const _0x42a203=_0x5b0546,_0x38a692=[];return _0x47bee8&&_0x38a692[_0x42a203(0xd0)]({'role':_0x42a203(0xf6),'content':_0x47bee8}),_0x13d237[_0x42a203(0x10c)](_0x45f2da=>{const _0x4436cf=_0x42a203;_0x38a692[_0x4436cf(0xd0)]({'role':_0x45f2da['sender']==='user'?_0x4436cf(0x147):_0x4436cf(0xbe),'content':_0x45f2da[_0x4436cf(0xc4)]});}),{'model':_0x42a203(0xbd),'messages':_0x38a692,'stream':!![]};}},{'id':_0x5b0546(0x143),'name':_0x5b0546(0x143),'apiKey':OPENROUTER_API_KEY2,'apiType':_0x5b0546(0x12f),'supportsStreaming':!![],'endpoint':_0x5b0546(0x127),'requestFormatter':(_0x2d844e,_0x237389)=>{const _0x3a8de2=_0x5b0546,_0x232648=[];return _0x237389&&_0x232648[_0x3a8de2(0xd0)]({'role':_0x3a8de2(0xf6),'content':_0x237389}),_0x2d844e[_0x3a8de2(0x10c)](_0x3d528b=>{const _0x5d55ea=_0x3a8de2;_0x232648[_0x5d55ea(0xd0)]({'role':_0x3d528b[_0x5d55ea(0xda)]===_0x5d55ea(0x147)?_0x5d55ea(0x147):_0x5d55ea(0xbe),'content':_0x3d528b[_0x5d55ea(0xc4)]});}),{'model':_0x3a8de2(0x97),'messages':_0x232648,'stream':!![]};}},{'id':'deepseek-r1','name':_0x5b0546(0xdc),'apiKey':OPENROUTER_API_KEY,'apiType':'openrouter','supportsStreaming':!![],'endpoint':_0x5b0546(0x127),'requestFormatter':(_0x377448,_0x155840)=>{const _0xc87839=[];return _0x155840&&_0xc87839['push']({'role':'system','content':_0x155840}),_0x377448['forEach'](_0xf9f65b=>{const _0x123ba8=_0x16e5;_0xc87839[_0x123ba8(0xd0)]({'role':_0xf9f65b['sender']===_0x123ba8(0x147)?_0x123ba8(0x147):_0x123ba8(0xbe),'content':_0xf9f65b['text']});}),{'model':'microsoft/mai-ds-r1:free','messages':_0xc87839,'stream':!![]};}}],ROLES=[{'id':_0x5b0546(0x9d),'name':'Стандарт','prompt':_0x5b0546(0x130)},{'id':_0x5b0546(0x8c),'name':_0x5b0546(0x8f),'prompt':_0x5b0546(0x121)},{'id':_0x5b0546(0xf9),'name':_0x5b0546(0xe8),'prompt':'Ты\x20-\x20талантливый\x20писатель\x20с\x20богатым\x20воображением\x20и\x20отточенным\x20стилем.\x20Твоя\x20задача\x20-\x20помогать\x20пользователю\x20с\x20созданием\x20захватывающих\x20текстов,\x20разработкой\x20оригинальных\x20сюжетов,\x20написанием\x20трогательных\x20стихов\x20и\x20запоминающихся\x20песен.\x20Используй\x20яркий\x20и\x20выразительный\x20язык,\x20умело\x20играй\x20со\x20словами\x20и\x20создавай\x20неповторимую\x20атмосферу.\x20Предлагай\x20несколько\x20вариантов,\x20раскрывающих\x20разные\x20грани\x20темы.\x20ПИШИ\x20ВСЕГДА\x20ПО\x20РУССКИ'},{'id':'translator','name':_0x5b0546(0xa5),'prompt':'Ты\x20-\x20профессиональный\x20переводчик,\x20владеющий\x20множеством\x20языков\x20и\x20обладающий\x20глубоким\x20пониманием\x20культурных\x20нюансов.\x20Твоя\x20задача\x20-\x20обеспечивать\x20точный\x20и\x20стилистически\x20грамотный\x20перевод\x20предоставленного\x20текста\x20с\x20одного\x20языка\x20на\x20другой.\x20Учитывай\x20контекст\x20и\x20целевую\x20аудиторию,\x20чтобы\x20сохранить\x20смысл\x20и\x20эмоциональную\x20окраску\x20оригинала.\x20При\x20необходимости\x20предлагай\x20несколько\x20вариантов\x20перевода.\x20ПИШИ\x20ВСЕГДА\x20ПО\x20РУССКИ'}];let dialogues=[],currentDialogueId=null,totalRequests=0x0,todayRequests=0x0,lastRequestDate=null,currentRoleId=ROLES[0x0]['id'],currentModelId=MODELS[0x0]['id'];function generateUUID(){const _0x1684f2=_0x5b0546;return _0x1684f2(0xa9)[_0x1684f2(0x92)](/[xy]/g,function(_0x56aced){const _0x3cb32e=_0x1684f2;var _0x33766e=Math['random']()*0x10|0x0,_0x2189b9=_0x56aced=='x'?_0x33766e:_0x33766e&0x3|0x8;return _0x2189b9[_0x3cb32e(0xfc)](0x10);});}function saveState(){const _0x3d7ade=_0x5b0546;localStorage[_0x3d7ade(0x7f)](_0x3d7ade(0x83),JSON[_0x3d7ade(0xe4)]({'dialogues':dialogues,'currentDialogueId':currentDialogueId,'totalRequests':totalRequests,'todayRequests':todayRequests,'lastRequestDate':lastRequestDate,'currentRoleId':currentRoleId,'currentModelId':currentModelId}));}function loadState(){const _0x2625b1=_0x5b0546,_0x214186=localStorage[_0x2625b1(0x91)](_0x2625b1(0x83));if(_0x214186){const _0x5e8968=JSON[_0x2625b1(0x93)](_0x214186);dialogues=_0x5e8968[_0x2625b1(0x13d)]||[],totalRequests=_0x5e8968['totalRequests']||0x0,todayRequests=_0x5e8968[_0x2625b1(0x106)]||0x0,lastRequestDate=_0x5e8968[_0x2625b1(0x8a)]||null,currentRoleId=_0x5e8968['currentRoleId']||ROLES[0x0]['id'];const _0x4f4069=_0x5e8968[_0x2625b1(0xce)],_0x3261fd=MODELS[_0x2625b1(0x137)](_0x45c5bb=>_0x45c5bb['id']===_0x4f4069);currentModelId=_0x3261fd?_0x3261fd['id']:MODELS[0x0]['id'];const _0x4ceca0=new Date()['toISOString']()[_0x2625b1(0xfe)]('T')[0x0];lastRequestDate!==_0x4ceca0&&(todayRequests=0x0,lastRequestDate=_0x4ceca0);const _0x48300=dialogues['find'](_0x4b65b3=>_0x4b65b3['id']===_0x5e8968[_0x2625b1(0xca)]);dialogues[_0x2625b1(0xd4)]===0x0||!_0x48300?createNewChat(!![]):currentDialogueId=_0x5e8968[_0x2625b1(0xca)];}else createNewChat(!![]);if(!currentDialogueId||!dialogues[_0x2625b1(0x137)](_0x1e7e0d=>_0x1e7e0d['id']===currentDialogueId)){if(dialogues[_0x2625b1(0xd4)]>0x0)currentDialogueId=dialogues[0x0]['id'];else{createNewChat(!![]);return;}}saveState();}function escapeHTML(_0x5190e8){const _0x48450c=_0x5b0546;return _0x5190e8[_0x48450c(0x92)](/&/g,_0x48450c(0x115))[_0x48450c(0x92)](/</g,_0x48450c(0x11d))[_0x48450c(0x92)](/>/g,_0x48450c(0x136))[_0x48450c(0x92)](/"/g,_0x48450c(0xef))[_0x48450c(0x92)](/'/g,'&#039;');}function formatMessageContent(_0x25ccac){const _0x4205ee=_0x5b0546,_0x42258e=/```(\w*)\n([\s\S]*?)```/g,_0x325020=/\*\*(.*?)\*\*/g;let _0x4ad8cc='',_0x50bb28=0x0;_0x25ccac[_0x4205ee(0x92)](_0x42258e,(_0x3e8edb,_0x15d21e,_0x36c2e0,_0x53dbb5)=>{const _0x370370=_0x4205ee;let _0x2423d3=_0x25ccac[_0x370370(0x132)](_0x50bb28,_0x53dbb5);_0x2423d3=escapeHTML(_0x2423d3),_0x2423d3=_0x2423d3['replace'](_0x325020,_0x370370(0x144)),_0x2423d3=_0x2423d3['replace'](/\n/g,_0x370370(0xf2)),_0x4ad8cc+=_0x2423d3;const _0x20b76f=_0x15d21e||_0x370370(0xed),_0xb47621=_0x36c2e0[_0x370370(0xdd)]();return _0x4ad8cc+=_0x370370(0x12c)+escapeHTML(_0x20b76f)+_0x370370(0x110)+escapeHTML(_0xb47621)+_0x370370(0x146),_0x50bb28=_0x53dbb5+_0x3e8edb[_0x370370(0xd4)],_0x3e8edb;});let _0x52b562=_0x25ccac[_0x4205ee(0x132)](_0x50bb28);return _0x52b562=escapeHTML(_0x52b562),_0x52b562=_0x52b562[_0x4205ee(0x92)](_0x325020,'<span\x20class=\x22bold-text\x22>$1</span>'),_0x52b562=_0x52b562[_0x4205ee(0x92)](/\n/g,_0x4205ee(0xf2)),_0x4ad8cc+=_0x52b562,_0x4ad8cc;}function addMessageToChat(_0x2cf6b5,_0x1e2794,_0x58061d=![]){const _0x10fc73=_0x5b0546,_0x3fea57=document['createElement'](_0x10fc73(0xec));_0x3fea57[_0x10fc73(0xab)][_0x10fc73(0xba)](_0x10fc73(0xf4)),_0x3fea57[_0x10fc73(0xab)][_0x10fc73(0xba)](_0x1e2794===_0x10fc73(0x147)?_0x10fc73(0x105):_0x10fc73(0xe6));_0x58061d&&_0x3fea57['classList'][_0x10fc73(0xba)](_0x10fc73(0x11a));const _0x37b0f7=document['createElement'](_0x10fc73(0xec));_0x37b0f7[_0x10fc73(0xab)][_0x10fc73(0xba)](_0x10fc73(0x8e)),_0x37b0f7[_0x10fc73(0xc6)]=_0x1e2794==='user'?'Вы':'AI';const _0x1bad93=document[_0x10fc73(0x88)](_0x10fc73(0xec));_0x1bad93['classList'][_0x10fc73(0xba)](_0x10fc73(0xaf));_0x58061d?_0x1bad93[_0x10fc73(0xc0)]=_0x2cf6b5:_0x1e2794==='ai'?_0x1bad93[_0x10fc73(0xc0)]=formatMessageContent(_0x2cf6b5):(_0x1bad93[_0x10fc73(0xc6)]=_0x2cf6b5,_0x1bad93[_0x10fc73(0xc0)]=_0x1bad93['innerHTML'][_0x10fc73(0x92)](/\n/g,'<br>'));_0x3fea57['appendChild'](_0x37b0f7),_0x3fea57['appendChild'](_0x1bad93),chatMessagesContainer[_0x10fc73(0xf8)](_0x3fea57),chatMessagesContainer[_0x10fc73(0xa0)]=chatMessagesContainer[_0x10fc73(0xfa)];if(_0x58061d)return _0x3fea57;}function updateMessageInChatElement(_0x4dd5f7,_0x578580){const _0x17930f=_0x5b0546;if(_0x4dd5f7&&_0x4dd5f7[_0x17930f(0xab)][_0x17930f(0x99)]('thinking')){_0x4dd5f7['classList'][_0x17930f(0xc5)](_0x17930f(0x11a));const _0x16e6e1=_0x4dd5f7[_0x17930f(0x9b)]('.message-content');_0x16e6e1&&(_0x16e6e1[_0x17930f(0xc0)]=formatMessageContent(_0x578580)),chatMessagesContainer[_0x17930f(0xa0)]=chatMessagesContainer[_0x17930f(0xfa)];}}function removeMessageFromChatElement(_0x4c5438){const _0x5e2003=_0x5b0546;_0x4c5438&&_0x4c5438[_0x5e2003(0xa8)]&&_0x4c5438['parentNode'][_0x5e2003(0x89)](_0x4c5438);}function renderMessages(_0x4b929b){const _0x34c60e=_0x5b0546;chatMessagesContainer[_0x34c60e(0xc0)]='';const _0x4f86ac=dialogues[_0x34c60e(0x137)](_0x30f7f1=>_0x30f7f1['id']===_0x4b929b);if(!_0x4f86ac){addMessageToChat(_0x34c60e(0xd1),'ai');return;}_0x4f86ac[_0x34c60e(0xc9)][_0x34c60e(0xd4)]===0x0?addMessageToChat(_0x34c60e(0xb1),'ai'):_0x4f86ac[_0x34c60e(0xc9)][_0x34c60e(0x10c)](_0x3c858c=>{addMessageToChat(_0x3c858c['text'],_0x3c858c['sender']);});}function renderChatList(){const _0x119e0c=_0x5b0546;chatList[_0x119e0c(0xc0)]='';if(dialogues['length']===0x0){const _0x1cb54a=document[_0x119e0c(0x88)]('li');_0x1cb54a[_0x119e0c(0xab)][_0x119e0c(0xba)]('chat-item',_0x119e0c(0x120)),_0x1cb54a[_0x119e0c(0xc6)]='Нет\x20диалогов',chatList[_0x119e0c(0xf8)](_0x1cb54a);return;}dialogues[_0x119e0c(0x10c)](_0x437892=>{const _0xb1567e=_0x119e0c,_0x21de5b=document['createElement']('li');_0x21de5b['classList']['add'](_0xb1567e(0xb4));_0x437892['id']===currentDialogueId&&_0x21de5b[_0xb1567e(0xab)]['add'](_0xb1567e(0xdb));_0x21de5b[_0xb1567e(0x85)]['dialogueId']=_0x437892['id'];const _0x42cae0=document[_0xb1567e(0x88)](_0xb1567e(0xd8));_0x42cae0['classList'][_0xb1567e(0xba)](_0xb1567e(0xee));const _0xe79e79=_0x437892[_0xb1567e(0xc9)][_0xb1567e(0x137)](_0x38ccc9=>_0x38ccc9[_0xb1567e(0xda)]===_0xb1567e(0x147));_0x42cae0[_0xb1567e(0xc6)]=_0x437892['title']||(_0xe79e79?_0xe79e79[_0xb1567e(0xc4)][_0xb1567e(0x132)](0x0,0x1e)+(_0xe79e79[_0xb1567e(0xc4)][_0xb1567e(0xd4)]>0x1e?_0xb1567e(0x133):''):'Новый\x20диалог');const _0x26f20d=document[_0xb1567e(0x88)](_0xb1567e(0xec));_0x26f20d['classList'][_0xb1567e(0xba)](_0xb1567e(0xde));const _0x57e750=document[_0xb1567e(0x88)]('i');_0x57e750['classList']['add'](_0xb1567e(0x108),_0xb1567e(0x87)),_0x57e750[_0xb1567e(0xd3)]=_0xb1567e(0x90),_0x57e750['dataset'][_0xb1567e(0x139)]=_0xb1567e(0xb0),_0x26f20d['appendChild'](_0x57e750),_0x21de5b[_0xb1567e(0xf8)](_0x42cae0),_0x21de5b[_0xb1567e(0xf8)](_0x26f20d),chatList[_0xb1567e(0xf8)](_0x21de5b);});}function renderRolesDropdown(){const _0x20c3b8=_0x5b0546;roleSelectDropdown[_0x20c3b8(0xc0)]='',ROLES['forEach'](_0x277251=>{const _0x5de615=_0x20c3b8,_0x50e068=document['createElement'](_0x5de615(0xec));_0x50e068[_0x5de615(0xab)][_0x5de615(0xba)](_0x5de615(0xd5)),_0x277251['id']===currentRoleId&&_0x50e068['classList']['add'](_0x5de615(0xdb)),_0x50e068[_0x5de615(0x85)][_0x5de615(0xd6)]=_0x277251['id'],_0x50e068['textContent']=_0x277251[_0x5de615(0x12b)],roleSelectDropdown[_0x5de615(0xf8)](_0x50e068);}),updateSelectedRoleName();}function updateSelectedRoleName(){const _0x29ac56=_0x5b0546,_0x218866=ROLES[_0x29ac56(0x137)](_0x268432=>_0x268432['id']===currentRoleId);selectedRoleNameSpan[_0x29ac56(0xc6)]=_0x218866?_0x218866[_0x29ac56(0x12b)]:'Неизвестная\x20роль';}function switchRole(_0x37a369){if(currentRoleId===_0x37a369)return;currentRoleId=_0x37a369,saveState(),renderRolesDropdown();}function renderModelsDropdown(){const _0x70c77b=_0x5b0546;modelSelectDropdown[_0x70c77b(0xc0)]='',MODELS[_0x70c77b(0x10c)](_0x5c105d=>{const _0x5164a4=_0x70c77b,_0x30af6b=document['createElement'](_0x5164a4(0xec));_0x30af6b[_0x5164a4(0xab)][_0x5164a4(0xba)](_0x5164a4(0xd5)),_0x5c105d['id']===currentModelId&&_0x30af6b['classList']['add'](_0x5164a4(0xdb)),_0x30af6b['dataset']['modelId']=_0x5c105d['id'],_0x30af6b[_0x5164a4(0xc6)]=_0x5c105d[_0x5164a4(0x12b)],modelSelectDropdown[_0x5164a4(0xf8)](_0x30af6b);}),updateSelectedModelName();}function updateSelectedModelName(){const _0x1c3792=_0x5b0546,_0x221538=MODELS[_0x1c3792(0x137)](_0x2b1b7=>_0x2b1b7['id']===currentModelId);selectedModelNameSpan[_0x1c3792(0xc6)]=_0x221538?_0x221538['name']:_0x1c3792(0x12a);}function switchModel(_0x15b83e){if(currentModelId===_0x15b83e)return;currentModelId=_0x15b83e,saveState(),renderModelsDropdown();}function _0x16e5(_0x4e69a8,_0x2fbb1e){const _0x43c3c7=_0x43c3();return _0x16e5=function(_0x16e533,_0x2ec4ce){_0x16e533=_0x16e533-0x7e;let _0x328d5a=_0x43c3c7[_0x16e533];return _0x328d5a;},_0x16e5(_0x4e69a8,_0x2fbb1e);}function updateCountersUI(){const _0x4332ac=_0x5b0546;totalRequestsSpan['textContent']=totalRequests,todayRequestsSpan[_0x4332ac(0xc6)]=todayRequests;}function createNewChat(_0x228e54=!![]){const _0x3b3a07=_0x5b0546,_0x45ff34=generateUUID(),_0x55e592={'id':_0x45ff34,'title':'','messages':[]};dialogues[_0x3b3a07(0x11f)](_0x55e592),_0x228e54&&(currentDialogueId=_0x45ff34,saveState(),renderChatList(),renderMessages(currentDialogueId));}function _0x43c3(){const _0x25d221=['copied','choices','&gt;','find','Не\x20удалось\x20получить\x20ответ\x20от\x20AI.','action','modelId','gemma-3','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','dialogues','Неизвестный\x20тип\x20API:','21034998oGwCgT','startsWith','addEventListener','closest','llama-4','<span\x20class=\x22bold-text\x22>$1</span>','then','</code></pre>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','user','findIndex','utf-8','setItem','558012iNwcrU','candidates','apiType','menapiState','Неизвестная\x20ошибка','dataset','json','fa-trash-alt','createElement','removeChild','lastRequestDate','map','coder','disabled','message-avatar','Программист','Удалить\x20диалог','getItem','replace','parse','getElementById','today-requests','clipboard','meta-llama/llama-4-maverick:free','overlay','contains','mobile-burger-button','querySelector','Вы\x20действительно\x20хотите\x20очистить\x20ВСЕ\x20диалоги?\x20Это\x20действие\x20нельзя\x20отменить.','standard','role-select-dropdown','application/json','scrollTop','parts','blockReason','toISOString','splice','Переводчик','google/gemma-3-1b-it:free','category','parentNode','xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx','join','classList','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','chat-messages','target','message-content','delete','Задавай\x20свои\x20вопросы\x20а\x20я\x20помогу\x20вам\x20на\x20них\x20ответить.','.\x20Проверьте\x20консоль\x20браузера\x20(F12).','style','chat-item','body','stopPropagation','Ваш\x20запрос\x20был\x20заблокирован\x20из-за:\x20','endpoint','getReader','add','POST','dialogueId','qwen/qwen2.5-vl-72b-instruct:free','assistant','1780850rwHPHi','innerHTML','model-select-dropdown','statusText','value','text','remove','textContent','click','prompt','messages','currentDialogueId','chat-list','focus','new-chat-button','currentModelId','API\x20HTTP\x20Ошибка:','push','Ошибка:\x20Диалог\x20не\x20найден.','DOMContentLoaded','title','length','dropdown-item','roleId','470928gMxYNo','span','4FwJmBD','sender','active','deepseek','trim','chat-item-actions','apiKey','display','preventDefault','total-requests','HTTP\x20Ошибка\x20API:\x20','stringify','probability','ai-message','\x20Детали:\x20','Писатель','49cnHhXI','<i\x20class=\x22fas\x20fa-check\x22></i>','\x20Причины:\x20','div','code','chat-title','&quot;','open','Ошибка\x20при\x20копировании\x20текста:','<br>','role-select','message','Вы\x20действительно\x20хотите\x20удалить\x20этот\x20диалог?','system','Произошла\x20ошибка:\x20','appendChild','writer','scrollHeight','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Печатает...','toString','Получен\x20неожиданный\x20ответ\x20от\x20AI\x20(Google).\x20Проверьте\x20консоль\x20браузера.','split','status','Произошла\x20ошибка:','block','catch','requestFormatter','.chat-item','user-message','todayRequests','.copy-button','fas','Выбранная\x20модель\x20не\x20найдена.','Неожиданная\x20структура\x20ответа\x20OpenRouter\x20API\x20(не-стрим):','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','forEach','Authorization','.sidebar','toggle','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22copy-button\x22\x20title=\x22Скопировать\x20код\x22><i\x20class=\x22fas\x20fa-copy\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<pre><code>','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','723791itijza','writeText','none','&amp;','3495198tQryND','log','safetyRatings','decode','thinking','message-input','4270890IEzIXh','&lt;','read','unshift','empty','ПИШИ\x20ПО\x20РУССКИ\x20ВСЕГДА\x20по\x20английзки\x20вообще\x20не\x20пиши\x20если\x20тебя\x20не\x20просят\x20Ты\x20-\x20опытный\x20программист,\x20эксперт\x20в\x20различных\x20языках\x20и\x20технологиях.\x20Твоя\x20задача\x20-\x20предоставлять\x20подробные\x20и\x20точные\x20ответы\x20на\x20вопросы,\x20связанные\x20с\x20кодом,\x20алгоритмами\x20и\x20архитектурой.\x20Все\x20примеры\x20кода\x20должны\x20быть\x20представлены\x20в\x20форматированных\x20блоках,\x20снабженных\x20комментариями\x20для\x20облегчения\x20понимания.\x20Тщательно\x20объясняй\x20сложные\x20концепции\x20программирования,\x20используя\x20аналогии\x20и\x20примеры\x20из\x20реального\x20мира.\x20ПИШИ\x20ВСЕГДА\x20ПО\x20РУССКИ','content','Ошибка\x20парсинга\x20JSON\x20чанка:','.code-block','promptFeedback','.dropdown-item','https://openrouter.ai/api/v1/chat/completions','error','API\x20Response\x20data:','Неизвестная\x20модель','name','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22code-block\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22code-block-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22code-language\x22>','qwen','Bearer\x20','openrouter','ПИШИ\x20ПО\x20РУССКИ\x20ВСЕГДА\x20по\x20английзки\x20вообще\x20не\x20пиши\x20если\x20тебя\x20не\x20просят','google','substring','...'];_0x43c3=function(){return _0x25d221;};return _0x43c3();}function switchChat(_0x4e928c){const _0x10f0f7=_0x5b0546;if(currentDialogueId===_0x4e928c)return;currentDialogueId=_0x4e928c,saveState(),renderChatList(),renderMessages(currentDialogueId),sidebar[_0x10f0f7(0xab)]['remove'](_0x10f0f7(0xf0)),overlay[_0x10f0f7(0xab)][_0x10f0f7(0xc5)](_0x10f0f7(0xf0));}function deleteChat(_0x4b7d66){const _0x263aab=_0x5b0546,_0x2c6e77=dialogues[_0x263aab(0x148)](_0x201f19=>_0x201f19['id']===_0x4b7d66);if(_0x2c6e77===-0x1)return;dialogues[_0x263aab(0xa4)](_0x2c6e77,0x1);if(dialogues[_0x263aab(0xd4)]===0x0)createNewChat(!![]);else currentDialogueId===_0x4b7d66?(currentDialogueId=dialogues[0x0]['id'],saveState(),renderChatList(),renderMessages(currentDialogueId)):(saveState(),renderChatList());}function clearAllChats(){const _0x71a7af=_0x5b0546;confirm(_0x71a7af(0x9c))&&(dialogues=[],createNewChat(!![]),updateCountersUI(),saveState());}async function sendMessage(){const _0x315987=_0x5b0546,_0x3efd05=messageInput[_0x315987(0xc3)][_0x315987(0xdd)]();if(!_0x3efd05)return;const _0x555ab3=dialogues[_0x315987(0x137)](_0x5bae20=>_0x5bae20['id']===currentDialogueId);if(!_0x555ab3){addMessageToChat('Ошибка:\x20Текущий\x20диалог\x20не\x20найден.','ai'),saveState();return;}addMessageToChat(_0x3efd05,_0x315987(0x147)),_0x555ab3['messages'][_0x315987(0xd0)]({'text':_0x3efd05,'sender':_0x315987(0x147)}),messageInput['value']='',messageInput[_0x315987(0x8d)]=!![],sendButton['disabled']=!![];const _0x3a6871=addMessageToChat(_0x315987(0xfb),'ai',!![]);try{const _0x17ada2=MODELS['find'](_0x106d4e=>_0x106d4e['id']===currentModelId);if(!_0x17ada2)throw new Error(_0x315987(0x109));const _0x434318=ROLES['find'](_0x5a040c=>_0x5a040c['id']===currentRoleId),_0x1792fc=_0x434318?_0x434318[_0x315987(0xc8)]:'',_0x467377=_0x17ada2[_0x315987(0x103)](_0x555ab3[_0x315987(0xc9)],_0x1792fc),_0x3ba1ad={'Content-Type':_0x315987(0x9f)};if(_0x17ada2[_0x315987(0xdf)]){if(_0x17ada2[_0x315987(0x82)]==='google'){}else _0x17ada2[_0x315987(0x82)]===_0x315987(0x12f)&&(_0x3ba1ad[_0x315987(0x10d)]=_0x315987(0x12e)+_0x17ada2[_0x315987(0xdf)]);}const _0x558f6a=await fetch(_0x17ada2[_0x315987(0xb8)],{'method':_0x315987(0xbb),'headers':_0x3ba1ad,'body':JSON[_0x315987(0xe4)](_0x467377)});if(!_0x558f6a['ok']){removeMessageFromChatElement(_0x3a6871);const _0x4dc6e7=await _0x558f6a[_0x315987(0x86)]();console['error'](_0x315987(0xcf),_0x558f6a[_0x315987(0xff)],_0x558f6a[_0x315987(0xc2)],_0x4dc6e7);let _0x466160=_0x315987(0xe3)+_0x558f6a['status']+'\x20'+_0x558f6a[_0x315987(0xc2)]+'.';if(_0x4dc6e7&&_0x4dc6e7[_0x315987(0x128)]&&_0x4dc6e7[_0x315987(0x128)][_0x315987(0xf4)])_0x466160+='\x20Детали:\x20'+_0x4dc6e7[_0x315987(0x128)][_0x315987(0xf4)];else _0x4dc6e7&&_0x4dc6e7[_0x315987(0xf4)]&&(_0x466160+=_0x315987(0xe7)+_0x4dc6e7[_0x315987(0xf4)]);addMessageToChat(_0x466160,'ai');}else{if(_0x17ada2['supportsStreaming']&&_0x558f6a[_0x315987(0xb5)]){let _0x549f3c='';const _0x4481d1=_0x558f6a[_0x315987(0xb5)][_0x315987(0xb9)](),_0x16cc27=new TextDecoder(_0x315987(0x7e));while(!![]){const {done:_0x4c3b40,value:_0x36b7fb}=await _0x4481d1[_0x315987(0x11e)]();if(_0x4c3b40)break;const _0x21c945=_0x16cc27[_0x315987(0x119)](_0x36b7fb,{'stream':!![]}),_0x8e68b6=_0x21c945['split']('\x0a')['filter'](_0x1934f7=>_0x1934f7[_0x315987(0xdd)]()!=='');for(const _0x163091 of _0x8e68b6){if(_0x163091[_0x315987(0x140)]('data:\x20')){const _0x20e47e=_0x163091[_0x315987(0x132)](0x6);if(_0x20e47e==='[DONE]')break;try{const _0x490616=JSON['parse'](_0x20e47e);if(_0x490616[_0x315987(0x135)]&&_0x490616[_0x315987(0x135)][_0x315987(0xd4)]>0x0){const _0x2c7a1a=_0x490616['choices'][0x0]['delta'][_0x315987(0x122)]||'';_0x2c7a1a&&(_0x549f3c+=_0x2c7a1a,updateMessageInChatElement(_0x3a6871,_0x549f3c));}}catch(_0x4e3e5e){console[_0x315987(0x128)](_0x315987(0x123),_0x4e3e5e,_0x20e47e);}}}}removeMessageFromChatElement(_0x3a6871),addMessageToChat(_0x549f3c,'ai'),_0x555ab3[_0x315987(0xc9)][_0x315987(0xd0)]({'text':_0x549f3c,'sender':'ai'});}else{const _0x127b56=await _0x558f6a['json']();removeMessageFromChatElement(_0x3a6871),console[_0x315987(0x117)](_0x315987(0x129),_0x127b56);let _0x1252f4=_0x315987(0x138);if(_0x17ada2[_0x315987(0x82)]===_0x315987(0x131)){if(_0x127b56[_0x315987(0x81)]&&_0x127b56[_0x315987(0x81)][_0x315987(0xd4)]>0x0&&_0x127b56[_0x315987(0x81)][0x0][_0x315987(0x122)]&&_0x127b56[_0x315987(0x81)][0x0]['content']['parts']&&_0x127b56[_0x315987(0x81)][0x0][_0x315987(0x122)][_0x315987(0xa1)][_0x315987(0xd4)]>0x0&&_0x127b56[_0x315987(0x81)][0x0][_0x315987(0x122)][_0x315987(0xa1)][0x0][_0x315987(0xc4)])_0x1252f4=_0x127b56[_0x315987(0x81)][0x0][_0x315987(0x122)][_0x315987(0xa1)][0x0]['text'],addMessageToChat(_0x1252f4,'ai'),_0x555ab3[_0x315987(0xc9)][_0x315987(0xd0)]({'text':_0x1252f4,'sender':'ai'});else{if(_0x127b56[_0x315987(0x125)]&&_0x127b56[_0x315987(0x125)][_0x315987(0xa2)]){let _0x43f220=_0x127b56[_0x315987(0x125)][_0x315987(0xa2)],_0x4c0064=_0x127b56[_0x315987(0x125)][_0x315987(0x118)],_0x1a3482=_0x315987(0xb7)+_0x43f220+'.';_0x4c0064&&_0x4c0064[_0x315987(0xd4)]>0x0&&(_0x1a3482+=_0x315987(0xeb)+_0x4c0064[_0x315987(0x8b)](_0x3f3317=>_0x3f3317[_0x315987(0xa7)]+'\x20('+_0x3f3317[_0x315987(0xe5)]+')')[_0x315987(0xaa)](',\x20')),addMessageToChat(_0x1a3482,'ai');}else console[_0x315987(0x128)]('Неожиданная\x20структура\x20ответа\x20Google\x20API:',_0x127b56),addMessageToChat(_0x315987(0xfd),'ai');}}else _0x17ada2[_0x315987(0x82)]===_0x315987(0x12f)?_0x127b56[_0x315987(0x135)]&&_0x127b56[_0x315987(0x135)][_0x315987(0xd4)]>0x0&&_0x127b56[_0x315987(0x135)][0x0][_0x315987(0xf4)]&&_0x127b56['choices'][0x0][_0x315987(0xf4)][_0x315987(0x122)]?(_0x1252f4=_0x127b56[_0x315987(0x135)][0x0][_0x315987(0xf4)]['content'],addMessageToChat(_0x1252f4,'ai'),_0x555ab3[_0x315987(0xc9)][_0x315987(0xd0)]({'text':_0x1252f4,'sender':'ai'})):(console[_0x315987(0x128)](_0x315987(0x10a),_0x127b56),addMessageToChat('Получен\x20неожиданный\x20ответ\x20от\x20AI\x20(OpenRouter,\x20не-стрим).\x20Проверьте\x20консоль\x20браузера.','ai')):(console[_0x315987(0x128)](_0x315987(0x13e),_0x17ada2[_0x315987(0x82)]),addMessageToChat('Неизвестный\x20тип\x20API\x20модели.','ai'));}!_0x555ab3[_0x315987(0xd3)]&&_0x555ab3[_0x315987(0xc9)][_0x315987(0xd4)]>0x0&&_0x555ab3[_0x315987(0xc9)][0x0]['sender']==='user'&&(_0x555ab3['title']=_0x555ab3['messages'][0x0][_0x315987(0xc4)][_0x315987(0x132)](0x0,0x1e)+(_0x555ab3[_0x315987(0xc9)][0x0]['text']['length']>0x1e?'...':''),renderChatList());totalRequests++;const _0x1f2c28=new Date()[_0x315987(0xa3)]()[_0x315987(0xfe)]('T')[0x0];lastRequestDate!==_0x1f2c28?(todayRequests=0x1,lastRequestDate=_0x1f2c28):todayRequests++,updateCountersUI();}saveState();}catch(_0xa04a77){console[_0x315987(0x128)](_0x315987(0x100),_0xa04a77),removeMessageFromChatElement(_0x3a6871);const _0xf99dcd=_0x315987(0xf7)+(_0xa04a77[_0x315987(0xf4)]||_0x315987(0x84))+_0x315987(0xb2);addMessageToChat(_0xf99dcd,'ai'),saveState();}finally{messageInput[_0x315987(0x8d)]=![],sendButton[_0x315987(0x8d)]=![],messageInput[_0x315987(0xcc)](),renderChatList();}}sendButton[_0x5b0546(0x141)]('click',sendMessage),messageInput[_0x5b0546(0x141)]('keypress',function(_0x2cb424){const _0x4bc721=_0x5b0546;_0x2cb424['key']==='Enter'&&!_0x2cb424['shiftKey']&&(_0x2cb424[_0x4bc721(0xe1)](),sendMessage());}),newChatButton[_0x5b0546(0x141)](_0x5b0546(0xc7),()=>{const _0x29bdcb=_0x5b0546;createNewChat(!![]),sidebar[_0x29bdcb(0xab)]['remove'](_0x29bdcb(0xf0)),overlay[_0x29bdcb(0xab)][_0x29bdcb(0xc5)](_0x29bdcb(0xf0));}),clearChatsButton['addEventListener']('click',()=>{const _0x4b3c97=_0x5b0546;clearAllChats(),sidebar[_0x4b3c97(0xab)][_0x4b3c97(0xc5)](_0x4b3c97(0xf0)),overlay[_0x4b3c97(0xab)][_0x4b3c97(0xc5)](_0x4b3c97(0xf0));}),chatList[_0x5b0546(0x141)](_0x5b0546(0xc7),_0x1addab=>{const _0x1d43ea=_0x5b0546,_0x52a682=_0x1addab[_0x1d43ea(0xae)][_0x1d43ea(0x142)](_0x1d43ea(0x104));if(!_0x52a682||!_0x52a682[_0x1d43ea(0x85)][_0x1d43ea(0xbc)])return;const _0x1913af=_0x52a682[_0x1d43ea(0x85)][_0x1d43ea(0xbc)],_0x4c603b=_0x1addab[_0x1d43ea(0xae)];_0x4c603b[_0x1d43ea(0xab)][_0x1d43ea(0x99)]('fa-trash-alt')?confirm(_0x1d43ea(0xf5))&&deleteChat(_0x1913af):switchChat(_0x1913af);}),roleSelect[_0x5b0546(0x141)]('click',_0x534120=>{const _0x1b6c14=_0x5b0546;_0x534120[_0x1b6c14(0xb6)](),roleSelectDropdown[_0x1b6c14(0xb3)][_0x1b6c14(0xe0)]=roleSelectDropdown['style'][_0x1b6c14(0xe0)]===_0x1b6c14(0x101)?'none':_0x1b6c14(0x101),modelSelectDropdown[_0x1b6c14(0xb3)][_0x1b6c14(0xe0)]='none';}),roleSelectDropdown[_0x5b0546(0x141)](_0x5b0546(0xc7),_0x42b366=>{const _0x34ee7e=_0x5b0546,_0x3f9292=_0x42b366['target']['closest']('.dropdown-item');_0x3f9292&&_0x3f9292['dataset'][_0x34ee7e(0xd6)]&&(switchRole(_0x3f9292[_0x34ee7e(0x85)][_0x34ee7e(0xd6)]),roleSelectDropdown[_0x34ee7e(0xb3)][_0x34ee7e(0xe0)]='none');}),modelSelect['addEventListener'](_0x5b0546(0xc7),_0x41e773=>{const _0x5b3fae=_0x5b0546;_0x41e773[_0x5b3fae(0xb6)](),modelSelectDropdown[_0x5b3fae(0xb3)]['display']=modelSelectDropdown[_0x5b3fae(0xb3)]['display']===_0x5b3fae(0x101)?_0x5b3fae(0x114):'block',roleSelectDropdown[_0x5b3fae(0xb3)][_0x5b3fae(0xe0)]=_0x5b3fae(0x114);}),modelSelectDropdown['addEventListener']('click',_0x263f88=>{const _0x5b1505=_0x5b0546,_0x2bd328=_0x263f88[_0x5b1505(0xae)][_0x5b1505(0x142)](_0x5b1505(0x126));_0x2bd328&&_0x2bd328[_0x5b1505(0x85)]['modelId']&&(switchModel(_0x2bd328[_0x5b1505(0x85)][_0x5b1505(0x13a)]),modelSelectDropdown['style'][_0x5b1505(0xe0)]='none');}),document[_0x5b0546(0x141)]('click',_0x3002c3=>{const _0x66bbbb=_0x5b0546;!roleSelect['contains'](_0x3002c3['target'])&&(roleSelectDropdown['style']['display']=_0x66bbbb(0x114)),!modelSelect[_0x66bbbb(0x99)](_0x3002c3[_0x66bbbb(0xae)])&&(modelSelectDropdown['style'][_0x66bbbb(0xe0)]=_0x66bbbb(0x114));}),chatMessagesContainer[_0x5b0546(0x141)](_0x5b0546(0xc7),_0x29afaf=>{const _0x5d807b=_0x5b0546;if(_0x29afaf[_0x5d807b(0xae)][_0x5d807b(0xab)][_0x5d807b(0x99)]('copy-button')||_0x29afaf[_0x5d807b(0xae)]['closest'](_0x5d807b(0x107))){const _0x379b1e=_0x29afaf[_0x5d807b(0xae)][_0x5d807b(0x142)]('.copy-button'),_0x103bdd=_0x379b1e['closest'](_0x5d807b(0x124));if(_0x103bdd){const _0x126c49=_0x103bdd[_0x5d807b(0x9b)](_0x5d807b(0xed));_0x126c49&&navigator[_0x5d807b(0x96)][_0x5d807b(0x113)](_0x126c49[_0x5d807b(0xc6)])[_0x5d807b(0x145)](()=>{const _0x47cdef=_0x5d807b,_0x26c8d2=_0x379b1e[_0x47cdef(0xc0)];_0x379b1e[_0x47cdef(0xc0)]=_0x47cdef(0xea),_0x379b1e[_0x47cdef(0xab)][_0x47cdef(0xba)](_0x47cdef(0x134)),setTimeout(()=>{const _0x414464=_0x47cdef;_0x379b1e[_0x414464(0xc0)]=_0x26c8d2,_0x379b1e[_0x414464(0xab)][_0x414464(0xc5)](_0x414464(0x134));},0x7d0);})[_0x5d807b(0x102)](_0xd7cb7b=>{const _0x1a6dec=_0x5d807b;console[_0x1a6dec(0x128)](_0x1a6dec(0xf1),_0xd7cb7b);});}}}),document[_0x5b0546(0x141)](_0x5b0546(0xd2),()=>{const _0x271bc0=_0x5b0546;loadState(),renderChatList(),currentDialogueId?renderMessages(currentDialogueId):dialogues[_0x271bc0(0xd4)]>0x0?switchChat(dialogues[0x0]['id']):createNewChat(!![]),renderRolesDropdown(),renderModelsDropdown(),updateCountersUI(),burgerButton[_0x271bc0(0x141)](_0x271bc0(0xc7),()=>{const _0x5c4a0f=_0x271bc0;sidebar['classList'][_0x5c4a0f(0x10f)](_0x5c4a0f(0xf0)),overlay[_0x5c4a0f(0xab)][_0x5c4a0f(0x10f)](_0x5c4a0f(0xf0));}),mobileBurgerButton['addEventListener'](_0x271bc0(0xc7),()=>{const _0x26ac51=_0x271bc0;sidebar[_0x26ac51(0xab)][_0x26ac51(0x10f)](_0x26ac51(0xf0)),overlay[_0x26ac51(0xab)][_0x26ac51(0x10f)](_0x26ac51(0xf0));}),overlay[_0x271bc0(0x141)](_0x271bc0(0xc7),()=>{const _0x6a4d79=_0x271bc0;sidebar[_0x6a4d79(0xab)][_0x6a4d79(0xc5)](_0x6a4d79(0xf0)),overlay[_0x6a4d79(0xab)][_0x6a4d79(0xc5)]('open');});});
